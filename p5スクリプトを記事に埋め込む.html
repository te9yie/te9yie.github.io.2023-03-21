<!DOCTYPE html><html><head><title>p5スクリプトを記事に埋め込む | te9yie</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><link rel="alternate" type="application/rss+xml" title="te9yie.github.io" href="/rss.xml"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/6be6fd051da7036b9cf5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6be6fd051da7036b9cf5.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-f9166b39babc81ded454.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.0a9f20eff0752717cd72.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.cd07b37488bd70e7d3b4.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-4da16b026c8a1984f231.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7cab515694f382ada850.js" as="script"/><link rel="preload" href="/_next/static/chunks/c3e90ca6be9a08f0f03b075a7b753d43038e291c.723a1bd0174c81133109.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/%5Bid%5D-bfeefb630b230d566a20.js" as="script"/></head><body><div id="__next"><nav><ul><li><a id="site-name" href="/">te9yie</a></li><li><a href="https://github.com/te9yie/te9yie.github.io"><i class="fab fa-github"></i></a></li><li><a href="https://www.google.com/search?q=site:te9yie.github.io">検索</a></li></ul></nav><header><h1>p5スクリプトを記事に埋め込む</h1></header><article><div><div></div><hr/><p><a href="MDX">MDX</a>で書いている記事に<a href="p5.js">p5.js</a>のスクリプトを埋め込みたい。</p><pre><pre class="prism-code language-markdown" style="background-color:#282c34;color:#ffffff;padding:1em"><div class="token-line" style="color:#ffffff"><span class="token plain">p5.jsでスケッチしてみた。</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">#</span><span class="token title important" style="font-weight:400"> Sketch00</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">P5Sketch</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">/sketch00.js</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#8dc891">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><p>こんな感じでコンポーネントを作って対応できるといいなと思った。</p><p>外部スクリプトを読み込む方法などを色々調べて試行錯誤したが無理だった。ページ遷移する際にちゃんと後処理をすることなどを考えると<code>useEffect()</code>のクリーンアップ処理あたりを使わないといけないと思うんだけど、良い案が思い浮かばなかった。<a href="React">React</a>の理解が足りていないだけかもしれない。</p><p>とりあえずは<a href="https://www.npmjs.com/package/react-p5">react-p5</a>を使ってなんとなく実装した。</p><pre><pre class="prism-code language-javascript" style="background-color:#282c34;color:#ffffff;padding:1em"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">// components/P5Sketch.js</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword module" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#8dc891">{</span><span class="token imports"> useState</span><span class="token imports punctuation" style="color:#8dc891">,</span><span class="token imports"> useEffect </span><span class="token imports punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;react&quot;</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword module" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token imports">loadable</span><span class="token plain"> </span><span class="token keyword module" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;@loadable/component&quot;</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#79b6f2">P5Sketch</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter punctuation" style="color:#8dc891">{</span><span class="token parameter"> name </span><span class="token parameter punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">Sketch</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">loadable</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token keyword module" style="color:#c5a5c5">import</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&quot;react-p5&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">sketch</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> setSketch</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">useState</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword null nil" style="color:#c5a5c5">null</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">useEffect</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">f</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span><span class="token keyword module" style="color:#c5a5c5">default</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> m </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#c5a5c5">await</span><span class="token plain"> </span><span class="token keyword module" style="color:#c5a5c5">import</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token template-string string" style="color:#8dc891">../libs/p5/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#8dc891">${</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#8dc891">}</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token function" style="color:#79b6f2">setSketch</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token function" style="color:#79b6f2">f</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">sketch </span><span class="token operator" style="color:#d7deea">?</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token maybe-class-name">Sketch</span><span class="token plain"> setup</span><span class="token operator" style="color:#d7deea">=</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">sketch</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">setup</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> draw</span><span class="token operator" style="color:#d7deea">=</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">sketch</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token property-access">draw</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">/</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#c5a5c5">null</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">div</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword module" style="color:#c5a5c5">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token maybe-class-name">P5Sketch</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><pre><pre class="prism-code language-javascript" style="background-color:#282c34;color:#ffffff;padding:1em"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">// libs/p5/sketch00.js</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">setup</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">p</span><span class="token parameter punctuation" style="color:#8dc891">,</span><span class="token parameter"> parent</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token spread operator" style="color:#d7deea">...</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">draw</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">p</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token spread operator" style="color:#d7deea">...</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword module" style="color:#c5a5c5">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#c5a5c5">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  setup</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  draw</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre><pre><pre class="prism-code language-markdown" style="background-color:#282c34;color:#ffffff;padding:1em"><div class="token-line" style="color:#ffffff"><span class="token plain">こんな感じで埋め込めるようにはなった。</span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">P5Sketch</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">sketch00</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#8dc891">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div></pre></pre></div></article><div class="post-footer"><div>last update: <!-- -->2021-04-08 20:21:44</div><div class="links">links<!-- -->:<!-- --> <ul><li><a href="/Next.js%E3%81%A7%E3%82%B5%E3%82%A4%E3%83%88%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B">Next.jsでサイトをつくる</a></li></ul></div></div><footer>© <!-- -->2021<!-- --> <!-- -->te9yie</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"p5スクリプトを記事に埋め込む","content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(P5Sketch, {\n    name: \"sketch00\",\n    mdxType: \"P5Sketch\"\n  }), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"className\": \"internal new\",\n    \"href\": \"MDX\"\n  }, \"MDX\"), \"\\u3067\\u66F8\\u3044\\u3066\\u3044\\u308B\\u8A18\\u4E8B\\u306B\", mdx(\"a\", {\n    parentName: \"p\",\n    \"className\": \"internal new\",\n    \"href\": \"p5.js\"\n  }, \"p5.js\"), \"\\u306E\\u30B9\\u30AF\\u30EA\\u30D7\\u30C8\\u3092\\u57CB\\u3081\\u8FBC\\u307F\\u305F\\u3044\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-markdown\"\n  }, \"p5.js\\u3067\\u30B9\\u30B1\\u30C3\\u30C1\\u3057\\u3066\\u307F\\u305F\\u3002\\n\\n# Sketch00\\n\\n\u003cP5Sketch src=\\\"/sketch00.js\\\" /\u003e\\n\")), mdx(\"p\", null, \"\\u3053\\u3093\\u306A\\u611F\\u3058\\u3067\\u30B3\\u30F3\\u30DD\\u30FC\\u30CD\\u30F3\\u30C8\\u3092\\u4F5C\\u3063\\u3066\\u5BFE\\u5FDC\\u3067\\u304D\\u308B\\u3068\\u3044\\u3044\\u306A\\u3068\\u601D\\u3063\\u305F\\u3002\"), mdx(\"p\", null, \"\\u5916\\u90E8\\u30B9\\u30AF\\u30EA\\u30D7\\u30C8\\u3092\\u8AAD\\u307F\\u8FBC\\u3080\\u65B9\\u6CD5\\u306A\\u3069\\u3092\\u8272\\u3005\\u8ABF\\u3079\\u3066\\u8A66\\u884C\\u932F\\u8AA4\\u3057\\u305F\\u304C\\u7121\\u7406\\u3060\\u3063\\u305F\\u3002\\u30DA\\u30FC\\u30B8\\u9077\\u79FB\\u3059\\u308B\\u969B\\u306B\\u3061\\u3083\\u3093\\u3068\\u5F8C\\u51E6\\u7406\\u3092\\u3059\\u308B\\u3053\\u3068\\u306A\\u3069\\u3092\\u8003\\u3048\\u308B\\u3068\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useEffect()\"), \"\\u306E\\u30AF\\u30EA\\u30FC\\u30F3\\u30A2\\u30C3\\u30D7\\u51E6\\u7406\\u3042\\u305F\\u308A\\u3092\\u4F7F\\u308F\\u306A\\u3044\\u3068\\u3044\\u3051\\u306A\\u3044\\u3068\\u601D\\u3046\\u3093\\u3060\\u3051\\u3069\\u3001\\u826F\\u3044\\u6848\\u304C\\u601D\\u3044\\u6D6E\\u304B\\u3070\\u306A\\u304B\\u3063\\u305F\\u3002\", mdx(\"a\", {\n    parentName: \"p\",\n    \"className\": \"internal new\",\n    \"href\": \"React\"\n  }, \"React\"), \"\\u306E\\u7406\\u89E3\\u304C\\u8DB3\\u308A\\u3066\\u3044\\u306A\\u3044\\u3060\\u3051\\u304B\\u3082\\u3057\\u308C\\u306A\\u3044\\u3002\"), mdx(\"p\", null, \"\\u3068\\u308A\\u3042\\u3048\\u305A\\u306F\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/react-p5\"\n  }, \"react-p5\"), \"\\u3092\\u4F7F\\u3063\\u3066\\u306A\\u3093\\u3068\\u306A\\u304F\\u5B9F\\u88C5\\u3057\\u305F\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"// components/P5Sketch.js\\nimport { useState, useEffect } from \\\"react\\\";\\nimport loadable from \\\"@loadable/component\\\";\\n\\nconst P5Sketch = ({ name }) =\u003e {\\n  const Sketch = loadable(() =\u003e import(\\\"react-p5\\\"));\\n  const [sketch, setSketch] = useState(null);\\n  useEffect(() =\u003e {\\n    const f = async () =\u003e {\\n      const { default: m } = await import(`../libs/p5/${name}`);\\n      setSketch(m);\\n    };\\n    f();\\n  }, []);\\n  return (\\n    \u003cdiv\u003e\\n      {sketch ? \u003cSketch setup={sketch.setup} draw={sketch.draw} /\u003e : null}\\n    \u003c/div\u003e\\n  );\\n};\\n\\nexport default P5Sketch;\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"// libs/p5/sketch00.js\\nconst setup = (p, parent) =\u003e {\\n  ...\\n};\\n\\nconst draw = (p) =\u003e {\\n  ...\\n};\\n\\nexport default {\\n  setup,\\n  draw,\\n};\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-markdown\"\n  }, \"\\u3053\\u3093\\u306A\\u611F\\u3058\\u3067\\u57CB\\u3081\\u8FBC\\u3081\\u308B\\u3088\\u3046\\u306B\\u306F\\u306A\\u3063\\u305F\\u3002\\n\\n\u003cP5Sketch name=\\\"sketch00\\\" /\u003e\\n\")));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cdiv\u003e\u003c/div\u003e\u003chr/\u003e\u003cp\u003e\u003ca href=\"MDX\"\u003eMDX\u003c/a\u003eで書いている記事に\u003ca href=\"p5.js\"\u003ep5.js\u003c/a\u003eのスクリプトを埋め込みたい。\u003c/p\u003e\u003cpre\u003e\u003cpre class=\"prism-code language-markdown\" style=\"background-color:#282c34;color:#ffffff;padding:1em\"\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003ep5.jsでスケッチしてみた。\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token title important punctuation\" style=\"font-weight:400;color:#8dc891\"\u003e#\u003c/span\u003e\u003cspan class=\"token title important\" style=\"font-weight:400\"\u003e Sketch00\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token tag punctuation\" style=\"color:#8dc891\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token tag\" style=\"color:#fc929e\"\u003eP5Sketch\u003c/span\u003e\u003cspan class=\"token tag\" style=\"color:#fc929e\"\u003e \u003c/span\u003e\u003cspan class=\"token tag attr-name\" style=\"color:#c5a5c5\"\u003esrc\u003c/span\u003e\u003cspan class=\"token tag attr-value punctuation attr-equals\" style=\"color:#8dc891\"\u003e=\u003c/span\u003e\u003cspan class=\"token tag attr-value punctuation\" style=\"color:#8dc891\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"token tag attr-value\" style=\"color:#8dc891\"\u003e/sketch00.js\u003c/span\u003e\u003cspan class=\"token tag attr-value punctuation\" style=\"color:#8dc891\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"token tag\" style=\"color:#fc929e\"\u003e \u003c/span\u003e\u003cspan class=\"token tag punctuation\" style=\"color:#8dc891\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003c/pre\u003e\u003cp\u003eこんな感じでコンポーネントを作って対応できるといいなと思った。\u003c/p\u003e\u003cp\u003e外部スクリプトを読み込む方法などを色々調べて試行錯誤したが無理だった。ページ遷移する際にちゃんと後処理をすることなどを考えると\u003ccode\u003euseEffect()\u003c/code\u003eのクリーンアップ処理あたりを使わないといけないと思うんだけど、良い案が思い浮かばなかった。\u003ca href=\"React\"\u003eReact\u003c/a\u003eの理解が足りていないだけかもしれない。\u003c/p\u003e\u003cp\u003eとりあえずは\u003ca href=\"https://www.npmjs.com/package/react-p5\"\u003ereact-p5\u003c/a\u003eを使ってなんとなく実装した。\u003c/p\u003e\u003cpre\u003e\u003cpre class=\"prism-code language-javascript\" style=\"background-color:#282c34;color:#ffffff;padding:1em\"\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token comment\" style=\"color:#999999\"\u003e// components/P5Sketch.js\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003eimport\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token imports punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token imports\"\u003e useState\u003c/span\u003e\u003cspan class=\"token imports punctuation\" style=\"color:#8dc891\"\u003e,\u003c/span\u003e\u003cspan class=\"token imports\"\u003e useEffect \u003c/span\u003e\u003cspan class=\"token imports punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003efrom\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token string\" style=\"color:#8dc891\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003eimport\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token imports\"\u003eloadable\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003efrom\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token string\" style=\"color:#8dc891\"\u003e\u0026quot;@loadable/component\u0026quot;\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#c5a5c5\"\u003econst\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function-variable function maybe-class-name\" style=\"color:#79b6f2\"\u003eP5Sketch\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e=\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token parameter\"\u003e name \u003c/span\u003e\u003cspan class=\"token parameter punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token arrow operator\" style=\"color:#d7deea\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#c5a5c5\"\u003econst\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eSketch\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e=\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#79b6f2\"\u003eloadable\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token arrow operator\" style=\"color:#d7deea\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003eimport\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\" style=\"color:#8dc891\"\u003e\u0026quot;react-p5\u0026quot;\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#c5a5c5\"\u003econst\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e[\u003c/span\u003e\u003cspan class=\"token plain\"\u003esketch\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e setSketch\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e]\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e=\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#79b6f2\"\u003euseState\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword null nil\" style=\"color:#c5a5c5\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  \u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#79b6f2\"\u003euseEffect\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token arrow operator\" style=\"color:#d7deea\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e    \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#c5a5c5\"\u003econst\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function-variable function\" style=\"color:#79b6f2\"\u003ef\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e=\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#c5a5c5\"\u003easync\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token arrow operator\" style=\"color:#d7deea\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e      \u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#c5a5c5\"\u003econst\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003edefault\u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e m \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e=\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword control-flow\" style=\"color:#c5a5c5\"\u003eawait\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003eimport\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string template-punctuation string\" style=\"color:#8dc891\"\u003e`\u003c/span\u003e\u003cspan class=\"token template-string string\" style=\"color:#8dc891\"\u003e../libs/p5/\u003c/span\u003e\u003cspan class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:#8dc891\"\u003e${\u003c/span\u003e\u003cspan class=\"token template-string interpolation\"\u003ename\u003c/span\u003e\u003cspan class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token template-string template-punctuation string\" style=\"color:#8dc891\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e      \u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#79b6f2\"\u003esetSketch\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token plain\"\u003em\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e    \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e    \u003c/span\u003e\u003cspan class=\"token function\" style=\"color:#79b6f2\"\u003ef\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  \u003c/span\u003e\u003cspan class=\"token keyword control-flow\" style=\"color:#c5a5c5\"\u003ereturn\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e    \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003ediv\u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e      \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003esketch \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e?\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eSketch\u003c/span\u003e\u003cspan class=\"token plain\"\u003e setup\u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003esketch\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003esetup\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token plain\"\u003e draw\u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003esketch\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003edraw\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e/\u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e:\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword null nil\" style=\"color:#c5a5c5\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e    \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e/\u003c/span\u003e\u003cspan class=\"token plain\"\u003ediv\u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003eexport\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003edefault\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eP5Sketch\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003c/pre\u003e\u003cpre\u003e\u003cpre class=\"prism-code language-javascript\" style=\"background-color:#282c34;color:#ffffff;padding:1em\"\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token comment\" style=\"color:#999999\"\u003e// libs/p5/sketch00.js\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#c5a5c5\"\u003econst\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function-variable function\" style=\"color:#79b6f2\"\u003esetup\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e=\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ep\u003c/span\u003e\u003cspan class=\"token parameter punctuation\" style=\"color:#8dc891\"\u003e,\u003c/span\u003e\u003cspan class=\"token parameter\"\u003e parent\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token arrow operator\" style=\"color:#d7deea\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  \u003c/span\u003e\u003cspan class=\"token spread operator\" style=\"color:#d7deea\"\u003e...\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword\" style=\"color:#c5a5c5\"\u003econst\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token function-variable function\" style=\"color:#79b6f2\"\u003edraw\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token operator\" style=\"color:#d7deea\"\u003e=\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e)\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token arrow operator\" style=\"color:#d7deea\"\u003e=\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  \u003c/span\u003e\u003cspan class=\"token spread operator\" style=\"color:#d7deea\"\u003e...\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003eexport\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token keyword module\" style=\"color:#c5a5c5\"\u003edefault\u003c/span\u003e\u003cspan class=\"token plain\"\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e{\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  setup\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e  draw\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e,\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\" style=\"color:#8dc891\"\u003e;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003c/pre\u003e\u003cpre\u003e\u003cpre class=\"prism-code language-markdown\" style=\"background-color:#282c34;color:#ffffff;padding:1em\"\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003eこんな感じで埋め込めるようにはなった。\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003cspan class=\"token tag punctuation\" style=\"color:#8dc891\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token tag\" style=\"color:#fc929e\"\u003eP5Sketch\u003c/span\u003e\u003cspan class=\"token tag\" style=\"color:#fc929e\"\u003e \u003c/span\u003e\u003cspan class=\"token tag attr-name\" style=\"color:#c5a5c5\"\u003ename\u003c/span\u003e\u003cspan class=\"token tag attr-value punctuation attr-equals\" style=\"color:#8dc891\"\u003e=\u003c/span\u003e\u003cspan class=\"token tag attr-value punctuation\" style=\"color:#8dc891\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"token tag attr-value\" style=\"color:#8dc891\"\u003esketch00\u003c/span\u003e\u003cspan class=\"token tag attr-value punctuation\" style=\"color:#8dc891\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"token tag\" style=\"color:#fc929e\"\u003e \u003c/span\u003e\u003cspan class=\"token tag punctuation\" style=\"color:#8dc891\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"token plain\"\u003e\u003c/span\u003e\u003c/div\u003e\u003cdiv class=\"token-line\" style=\"color:#ffffff\"\u003e\u003cspan class=\"token plain\" style=\"display:inline-block\"\u003e\n\u003c/span\u003e\u003c/div\u003e\u003c/pre\u003e\u003c/pre\u003e","scope":{}},"lastUpdate":"2021-04-08 20:21:44","refLinks":[],"links":["Next.jsでサイトをつくる"]}},"__N_SSG":true},"page":"/[id]","query":{"id":"p5スクリプトを記事に埋め込む"},"buildId":"94FIrbPvNQCgH09kM-1vl","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-144e5fa6fafab6397d9c.js"></script><script src="/_next/static/chunks/webpack-f9166b39babc81ded454.js" async=""></script><script src="/_next/static/chunks/framework.0a9f20eff0752717cd72.js" async=""></script><script src="/_next/static/chunks/commons.cd07b37488bd70e7d3b4.js" async=""></script><script src="/_next/static/chunks/main-4da16b026c8a1984f231.js" async=""></script><script src="/_next/static/chunks/pages/_app-7cab515694f382ada850.js" async=""></script><script src="/_next/static/chunks/c3e90ca6be9a08f0f03b075a7b753d43038e291c.723a1bd0174c81133109.js" async=""></script><script src="/_next/static/chunks/pages/%5Bid%5D-bfeefb630b230d566a20.js" async=""></script><script src="/_next/static/94FIrbPvNQCgH09kM-1vl/_buildManifest.js" async=""></script><script src="/_next/static/94FIrbPvNQCgH09kM-1vl/_ssgManifest.js" async=""></script></body></html>